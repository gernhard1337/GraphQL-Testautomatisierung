\chapter{Anhang}

\section*{GraphQL-Toy Implementation mit Bugs}
\label{graphql-toy-code}
\begin{lstlisting}

const {ApolloServer, gql, ApolloError} = require('apollo-server');

const typeDefs = gql`
    type User {
        id: ID!
        name: String!
        age: Int!
        projects: [Project!]!
    }

    type Project {
        id: ID!
        name: String!
        description: String!
        owner: User!
        members: [User!]!
    }

    type Query {
        project(id: ID!): Project
        userProjects(id: ID!): [Project!]!
    }
`;

const db = {
    projects: [
        {
            id: "1",
            name: "Project 1",
            description: "Awesome project!",
            owner: "100",
            members: ["100", "200"],
        },
        {
            id: "2",
            name: "Project 2",
            description: "Not an awesome project!",
            owner: "200",
            members: ["200"],
        },
    ],
    users: [
        {
            id: "100",
            name: "Burt",
            age: 23,
            projects: ["1", "2"],
        },
        {
            id: "200",
            name: "Earnie",
            age: 32,
            projects: ["2"],
        },
    ],
};

const resolvers = {
    Query: {
        project: (_, {id}, context, info) => {

            // Example bug 1 - Syntax mistake
            // return db.projects.find(project => project.id ===);

            // Example bug 2 - Give "foo", input validation
            // return db.projects[parseInt(id)];

            // Example bug 3 - Input type validation bug
            //return db.projects[id];

            // Example bug 4 - Using the wrong field
            // return db.projects.find(project => project.name === id);

            // Example bug 5 - wrong type "error"
            // return { ...db.projects.find(project => project.id === id), name: ["a", "b"] };

            // Example bug 6 - IndexOutOfBounds
            // return db.projects[parseInt(id)];

            // Correct implementation
            return db.projects.find(project => project.id === id);
        },
        userProjects: (_, {id}, context, info) => {
            const user = db.users.find(user => user.id === id);

            // Example bug 1 - Syntax Error
            // return db.projects.filter(project => user.projects.includes());

            // Example bug 2 - Using the wrong field
            // return db.projects.filter(project => user.projects.includes(project.name));

            // Example bug 3 - wrong type "errors"
            // return db.projects.filter(project => user.projects.includes);

            // Correct implementation
            return db.projects.filter(project => user.projects.includes(project.id));
        },
    },
    Project: {
        owner: (project) => {
            // Example bug 1 - Syntax mistake
            // return db.users.find(user => user.id ===);

            // Example bug 2 - Using the wrong field
            // return db.users.find(user => user.name === project.owner);

            // Example bug 3 - wrong type "error"
            // return { ...db.users.find(user => user.id === project.owner), name: ["a", "b"] };

            // Correct implementation
            return db.users.find(user => user.id === project.owner);
        },
        members: (project) => {
            // Example bug 1 - logic error
            // return db.users.filter(user => project.members.includes());

            // Example bug 2 - Using the wrong field
            // return db.users.filter(user => project.members.includes(user.name));

            // Example bug 3 - wrong type "errors"
            // return db.users.filter(user => project.members.includes);

            // Correct implementation
            return db.users.filter(user => project.members.includes(user.id));
        },
    },
    User: {
        projects: (user) => {
            // Example bug 1 - Syntax Error
            // return db.projects.filter(project => user.projects.includes());

            // Example bug 2 - Using the wrong field
            return db.projects.filter(project => user.projects.includes(project.name));

            // Example bug 3 - wrong type "errors"
            // return db.projects.filter(project => user.projects.includes);

            // Correct implementation
            return db.projects.filter(project => user.projects.includes(project.id));
        },
    },
};

const server = new ApolloServer({typeDefs, resolvers});

server.listen().then(({url}) => {
    console.log(`Server ready at ${url}`);
});
\end{lstlisting}

\section*{Introspection-Query}
\label{introspection-query}
\begin{lstlisting}
    query IntrospectionQuery {
  __schema {
    queryType {
      name
    }
    mutationType {
      name
    }
    subscriptionType {
      name
    }
    types {
      ...FullType
    }
    directives {
      name
      description
      locations
      args {
        ...InputValue
      }
    }
  }
}

fragment FullType on __Type {
  kind
  name
  description
  fields(includeDeprecated: true) {
    name
    description
    args {
      ...InputValue
    }
    type {
      ...TypeRef
    }
    isDeprecated
    deprecationReason
  }
  inputFields {
    ...InputValue
  }
  interfaces {
    ...TypeRef
  }
  enumValues(includeDeprecated: true) {
    name
    description
    isDeprecated
    deprecationReason
  }
  possibleTypes {
    ...TypeRef
  }
}

fragment InputValue on __InputValue {
  name
  description
  type {
    ...TypeRef
  }
  defaultValue
}

fragment TypeRef on __Type {
  kind
  name
  ofType {
    kind
    name
    ofType {
      kind
      name
      ofType {
        kind
        name
        ofType {
          kind
          name
          ofType {
            kind
            name
            ofType {
              kind
              name
              ofType {
                kind
                name
              }
            }
          }
        }
      }
    }
  }
}
\end{lstlisting}



\section*{minimale Schema Response}
\label{minimal-schema-response}
\begin{lstlisting}
{
  "data": {
    "__schema": {
      "queryType": {
        "name": "Query"
      },
      "mutationType": null,
      "subscriptionType": null,
      "types": [
        {
          "kind": "OBJECT",
          "name": "Query",
          "description": null,
          "fields": [
            {
              "name": "book",
              "description": null,
              "args": [
                {
                  "name": "id",
                  "description": null,
                  "type": {
                    "kind": "SCALAR",
                    "name": "ID",
                    "ofType": null
                  },
                  "defaultValue": null
                }
              ],
              "type": {
                "kind": "OBJECT",
                "name": "Book",
                "ofType": null
              },
              "isDeprecated": false,
              "deprecationReason": null
            },
            {
              "name": "author",
              "description": null,
              "args": [
                {
                  "name": "id",
                  "description": null,
                  "type": {
                    "kind": "SCALAR",
                    "name": "ID",
                    "ofType": null
                  },
                  "defaultValue": null
                }
              ],
              "type": {
                "kind": "OBJECT",
                "name": "Author",
                "ofType": null
              },
              "isDeprecated": false,
              "deprecationReason": null
            },
            {
              "name": "publisher",
              "description": null,
              "args": [
                {
                  "name": "id",
                  "description": null,
                  "type": {
                    "kind": "SCALAR",
                    "name": "ID",
                    "ofType": null
                  },
                  "defaultValue": null
                }
              ],
              "type": {
                "kind": "OBJECT",
                "name": "Publisher",
                "ofType": null
              },
              "isDeprecated": false,
              "deprecationReason": null
            }
          ],
          "inputFields": null,
          "interfaces": [],
          "enumValues": null,
          "possibleTypes": null
        },
        {
          "kind": "OBJECT",
          "name": "Book",
          "description": null,
          "fields": [
            {
              "name": "id",
              "description": null,
              "args": [],
              "type": {
                "kind": "SCALAR",
                "name": "ID",
                "ofType": null
              },
              "isDeprecated": false,
              "deprecationReason": null
            },
            {
              "name": "title",
              "description": null,
              "args": [],
              "type": {
                "kind": "SCALAR",
                "name": "String",
                "ofType": null
              },
              "isDeprecated": false,
              "deprecationReason": null
            },
            {
              "name": "author",
              "description": null,
              "args": [],
              "type": {
                "kind": "OBJECT",
                "name": "Author",
                "ofType": null
              },
              "isDeprecated": false,
              "deprecationReason": null
            },
            {
              "name": "publisher",
              "description": null,
              "args": [],
              "type": {
                "kind": "OBJECT",
                "name": "Publisher",
                "ofType": null
              },
              "isDeprecated": false,
              "deprecationReason": null
            }
          ],
          "inputFields": null,
          "interfaces": [],
          "enumValues": null,
          "possibleTypes": null
        },
        {
          "kind": "OBJECT",
          "name": "Author",
          "description": null,
          "fields": [
            {
              "name": "id",
              "description": null,
              "args": [],
              "type": {
                "kind": "SCALAR",
                "name": "ID",
                "ofType": null
              },
              "isDeprecated": false,
              "deprecationReason": null
            },
            {
              "name": "name",
              "description": null,
              "args": [],
              "type": {
                "kind": "SCALAR",
                "name": "String",
                "ofType": null
              },
              "isDeprecated": false,
              "deprecationReason": null
            },
            {
              "name": "books",
              "description": null,
              "args": [],
              "type": {
                "kind": "LIST",
                "name": null,
                "ofType": {
                  "kind": "OBJECT",
                  "name": "Book",
                  "ofType": null
                }
              },
              "isDeprecated": false,
              "deprecationReason": null
            }
          ],
          "inputFields": null,
          "interfaces": [],
          "enumValues": null,
          "possibleTypes": null
        },
        {
          "kind": "OBJECT",
          "name": "Publisher",
          "description": null,
          "fields": [
            {
              "name": "id",
              "description": null,
              "args": [],
              "type": {
                "kind": "SCALAR",
                "name": "ID",
                "ofType": null
              },
              "isDeprecated": false,
              "deprecationReason": null
            },
            {
              "name": "name",
              "description": null,
              "args": [],
              "type": {
                "kind": "SCALAR",
                "name": "String",
                "ofType": null
              },
              "isDeprecated": false,
              "deprecationReason": null
            },
            {
              "name": "books",
              "description": null,
              "args": [],
              "type": {
                "kind": "LIST",
                "name": null,
                "ofType": {
                  "kind": "OBJECT",
                  "name": "Book",
                  "ofType": null
                }
              },
              "isDeprecated": false,
              "deprecationReason": null
            }
          ],
          "inputFields": null,
          "interfaces": [],
          "enumValues": null,
          "possibleTypes": null
        }

      ]
    }
  }
}
\end{lstlisting}


\section*{Query1}
\label{query1}
\begin{lstlisting}
{
  group(fullPath: "e\u0000") {
    avatarUrl
    description
    descriptionHtml
    fullName
    fullPath
    id
    lfsEnabled
    name
    path
    requestAccessEnabled
    visibility
    webUrl
    projects(
      includeSubgroups: false,
      after: "CXPnWOYLTuOjSbbwJqqY",
      before: "CrGVlZBseDurRlgzEbtU",
      first: 2522,
      last: 3011
    ) {
      nodes {
        archived
        avatarUrl
        containerRegistryEnabled
        createdAt
        description
        descriptionHtml
        forksCount
        fullPath
        httpUrlToRepo
        id
        importStatus
        issuesEnabled
        jobsEnabled
        lastActivityAt
        lfsEnabled
        mergeRequestsEnabled
        mergeRequestsFfOnlyEnabled
        name
        nameWithNamespace
        onlyAllowMergeIfAllDiscussionsAreResolved
        onlyAllowMergeIfPipelineSucceeds
        openIssuesCount
        path
        printingMergeRequestLinkEnabled
        publicJobs
        removeSourceBranchAfterMerge
        requestAccessEnabled
        sharedRunnersEnabled
        snippetsEnabled
        sshUrlToRepo
        starCount
        tagList
        visibility
        webUrl
        wikiEnabled
        issues(
          iid: "ijrhRHNqHyAjlpaJknYi",
          iids: "oSTpjUyfHvXKPFvrnNAK",
          state: closed,
          labelName: "NGJwsiFoOWbPIDPCEOPS",
          createdBefore: "2023-07-19T22:26:43",
          createdAfter: "2023-04-15T21:00:50",
          updatedBefore: "2023-07-10T11:48:12",
          updatedAfter: "2023-02-24T21:34:52",
          closedBefore: "2023-04-23T17:41:34",
          closedAfter: "2023-01-28T01:02:27",
          search: "ZnbnsbggmMpWkRkQfZDT",
          sort: DUE_DATE_DESC,
          after: "onPOzYJlSSdeVODfTFZd",
          before: "crsihXiPwGbeXvUzAHCM",
          first: 7038,
          last: 5497
        ) {
          nodes {
            closedAt
            confidential
            createdAt
            description
            descriptionHtml
            discussionLocked
            downvotes
            dueDate
            iid
            reference
            relativePosition
            subscribed
            timeEstimate
            title
            titleHtml
            totalTimeSpent
            updatedAt
            upvotes
            userNotesCount
            webPath
            webUrl
            notes(
              after: "EdfPOYFMhnmaRwXCdIXk",
              before: "wMdIUdZSYCYGUHShEdSY",
              first: 7363,
              last: 8871
            ) {
              edges {
                cursor
                node {
                  body
                  bodyHtml
                  createdAt
                  id
                  resolvable
                  resolvedAt
                  system
                  updatedAt
                  createdAt
                }
              }
            }
          }
        }
      }
    }
  }
}
\end{lstlisting}

\section*{Query2}
\label{query2}
\begin{lstlisting}
{
  namespace(fullPath: "e\u0000") {
    description
    descriptionHtml
    fullName
    fullPath
    id
    lfsEnabled
    name
    path
    requestAccessEnabled
    visibility
    projects(
      includeSubgroups: true,
      after: "LzGUwINJWDSdeHYamsoy",
      before: "VdRsarUsfXODNvMdrBWx",
      first: 6482,
      last: 3087
    ) {
      nodes {
        archived
        avatarUrl
        containerRegistryEnabled
        createdAt
        description
        descriptionHtml
        forksCount
        fullPath
        httpUrlToRepo
        id
        importStatus
        issuesEnabled
        jobsEnabled
        lastActivityAt
        lfsEnabled
        mergeRequestsEnabled
        mergeRequestsFfOnlyEnabled
        name
        nameWithNamespace
        onlyAllowMergeIfAllDiscussionsAreResolved
        onlyAllowMergeIfPipelineSucceeds
        openIssuesCount
        path
        printingMergeRequestLinkEnabled
        publicJobs
        removeSourceBranchAfterMerge
        requestAccessEnabled
        sharedRunnersEnabled
        snippetsEnabled
        sshUrlToRepo
        starCount
        tagList
        visibility
        webUrl
        wikiEnabled
        repository {
          empty
          exists
          rootRef
          tree(
            path: "XNQtaUctgSGfziijhXQv",
            ref: "zCYbJRMCKGotQJmpBcZa",
            recursive: true
          ) {
            lastCommit {
              authorName
              authoredDate
              description
              id
              message
              sha
              signatureHtml
              title
              webUrl
              author {
                avatarUrl
                name
                username
                webUrl
                snippets(
                  ids: ["e\u0000", "", "TEST", "2"],
                  visibility: private,
                  type: project,
                  after: "gVweJjzTOptsXXmrvTtA",
                  before: "uSKONOPlLKFpiKNhBIyN",
                  first: 3982,
                  last: 2317
                ) {
                  pageInfo {
                    endCursor
                    hasNextPage
                    hasPreviousPage
                    startCursor
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
\end{lstlisting}

\section*{Query 3}
\label{query3}
\begin{lstlisting}
{
  project(fullPath: "e\u0000") {
    archived
    avatarUrl
    containerRegistryEnabled
    createdAt
    description
    descriptionHtml
    forksCount
    fullPath
    httpUrlToRepo
    id
    importStatus
    issuesEnabled
    jobsEnabled
    lastActivityAt
    lfsEnabled
    mergeRequestsEnabled
    mergeRequestsFfOnlyEnabled
    name
    nameWithNamespace
    onlyAllowMergeIfAllDiscussionsAreResolved
    onlyAllowMergeIfPipelineSucceeds
    openIssuesCount
    path
    printingMergeRequestLinkEnabled
    publicJobs
    removeSourceBranchAfterMerge
    requestAccessEnabled
    sharedRunnersEnabled
    snippetsEnabled
    sshUrlToRepo
    starCount
    tagList
    visibility
    webUrl
    wikiEnabled
    snippets(
      ids: ["e\u0000", "e\u0000", "e\u0000", "2"],
      visibility: private,
      after: "GCGqcYIymVfIjZJrghZx",
      before: "jbZllxYHDwZVZKgtdtBQ",
      first: 7612,
      last: 3392
    ) {
      edges {
        cursor
        node {
          content
          createdAt
          description
          descriptionHtml
          fileName
          id
          rawUrl
          title
          updatedAt
          webUrl
          discussions(
            after: "XwwfgUTrYgPYJwgMBmmb",
            before: "oUeZWQMPwSveCHQrBEts",
            first: 8210,
            last: 974
          ) {
            edges {
              cursor
              node {
                createdAt
                id
                replyId
                notes(
                  after: "GfzdyMEZcMMPkByUduYi",
                  before: "MMqCqCBXDTYiNgFgERvS",
                  first: 95,
                  last: 5742
                ) {
                  nodes {
                    body
                    bodyHtml
                    createdAt
                    id
                    resolvable
                    resolvedAt
                    system
                    updatedAt
                    position {
                      filePath
                      height
                      newLine
                      newPath
                      oldLine
                      oldPath
                      width
                      x
                      y
                      positionType
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
\end{lstlisting}

\section*{Query 4}
\label{query4}
\begin{lstlisting}
{
  project(fullPath: "groupx_3/projectx_32_6") {
    archived
    avatarUrl
    containerRegistryEnabled
    createdAt
    description
    descriptionHtml
    forksCount
    fullPath
    httpUrlToRepo
    id
    importStatus
    issuesEnabled
    jobsEnabled
    lastActivityAt
    lfsEnabled
    mergeRequestsEnabled
    mergeRequestsFfOnlyEnabled
    name
    nameWithNamespace
    onlyAllowMergeIfAllDiscussionsAreResolved
    onlyAllowMergeIfPipelineSucceeds
    openIssuesCount
    path
    printingMergeRequestLinkEnabled
    publicJobs
    removeSourceBranchAfterMerge
    requestAccessEnabled
    sharedRunnersEnabled
    snippetsEnabled
    sshUrlToRepo
    starCount
    tagList
    visibility
    webUrl
    wikiEnabled
    issues(
      iid: "ksXuZMlxdVxzlAaqAjrf",
      iids: "NNAPRcqvnZwDucszkDnh",
      state: locked,
      labelName: "UfeLauqqxLVxuylCFelM",
      createdBefore: "2023-06-30T19:05:54",
      createdAfter: "2023-07-10T04:47:34",
      updatedBefore: "2023-05-14T23:47:22",
      updatedAfter: "2022-09-13T21:09:10",
      closedBefore: "2023-04-28T02:51:59",
      closedAfter: "2022-09-21T20:23:50",
      search: "vAlPWbLSJmlVURpSjmwp",
      sort: created_asc,
      after: "ZuiCQglYmENZJKKScvzv",
      before: "CKMgjxLkrigiXrEPsCPO",
      first: 1092,
      last: 7980
    ) {
      nodes {
        closedAt
        confidential
        createdAt
        description
        descriptionHtml
        discussionLocked
        downvotes
        dueDate
        iid
        reference
        relativePosition
        subscribed
        timeEstimate
        title
        titleHtml
        totalTimeSpent
        updatedAt
        upvotes
        userNotesCount
        webPath
        webUrl
        discussions(
          after: "dDaOgakGAttuToCxHVCh",
          before: "GcPWhODVHIJXhRgyVMIo",
          first: 326,
          last: 1256
        ) {
          edges {
            cursor
            node {
              createdAt
              id
              replyId
              notes(
                after: "OKLaEyaCRXZzPbczOzzL",
                before: "aALrKAxqGqTKmbIaQBIW",
                first: 6876,
                last: 1571
              ) {
                edges {
                  cursor
                  node {
                    body
                    bodyHtml
                    createdAt
                    id
                    resolvable
                    resolvedAt
                    system
                    updatedAt
                    author {
                      avatarUrl
                      name
                      username
                      webUrl
                      snippets(
                        ids: [
                          "gid://gitlab/PersonalSnippet/20",
                          "gid://gitlab/PersonalSnippet/23",
                          "e\u0000",
                          "e\u0000"
                        ],
                        visibility: public,
                        type: project,
                        after: "VkZPAFgXGsLOdfHFUDRv",
                        before: "nWqYnCGxOSAGVQZHyclO",
                        first: 8620,
                        last: 9077
                      ) {
                        edges {
                          cursor
                          node {
                            content
                            createdAt
                            description
                            descriptionHtml
                            fileName
                            id
                            rawUrl
                            title
                            updatedAt
                            webUrl
                            visibilityLevel
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
\end{lstlisting}